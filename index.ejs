<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>
    Longshan Temple Tour - Taipei Free Walking Tour
  </title>
  <!-- Latest compiled and minified CSS -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">
  <!-- Optional theme -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap-theme.min.css" integrity="sha384-fLW2N01lMqjakBkx3l/M9EahuwpSfeNvV63J5ezn3uZzapT0u7EYsXMjQV+0En5r" crossorigin="anonymous">
  <!-- Latest compiled and minified JavaScript -->
    <script
  src="https://code.jquery.com/jquery-1.7.2.min.js"
  integrity="sha256-R7aNzoy2gFrVs+pNJ6+SokH04ppcEqJ0yFLkNGoFALQ="
  crossorigin="anonymous"></script>
  <script type="text/javascript" src="/js/jquery.reveal.js"></script>
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.3/css/all.css" integrity="sha384-UHRtZLI+pbxtHCWp1t77Bi1L4ZtiqrqD80Kn4Z8NTSRyMA2Fd33n5dQ8lWUE00s/" crossorigin="anonymous">
  <link rel="stylesheet" href="/js/slider/css/swiper.min.css">
  <link rel="stylesheet" type="text/css" href="/v2/css/oldtown.css">
  <link rel="stylesheet" type="text/css" href="/v2/css/reveal.css">
  <link href='https://fonts.googleapis.com/css?family=Josefin+Sans:400,600' rel='stylesheet' type='text/css'>
  <link rel="stylesheet" href="/js/pickadate.js-3.5.6/lib/themes/default.css">
   <link rel="stylesheet" href="/js/pickadate.js-3.5.6/lib/themes/default.date.css">
  <script src="/js/pickadate.js-3.5.6/lib/picker.js"></script>
  <script src="/js/pickadate.js-3.5.6/lib/picker.date.js"></script>
  <!-- Meta tag, to be identified by google search -->
    <link rel="shortcut icon" href="logoOrange.png">
    <link rel="icon" href="/images/logoc.png" type="image/x-icon">
    <meta name="description" content="Join us in a journey back to the past! Together we will travel back in time to 18 century Wanhua district where Taipei city was founded!" />
    <meta property="og:type" content="Organization">
    <meta property="og:title" content="Taipei Free Walking Tour - Longshan Temple Tour Tour">
    <meta property="og:url" content="https://www.tourmeaway.com/tours/temple">
    <meta property="og:description" content="Join us in a journey back to the past! Together we will travel back in time to 18 century Wanhua district where Taipei city was founded!">
    <meta property="og:image" content="http://tourmeaway.com/home/tours/temple1.jpg">
    <script src="/js/pickadate.js-3.5.6/lib/picker.js"></script>
  <script src="/js/pickadate.js-3.5.6/lib/picker.date.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/js-cookie@2/src/js.cookie.min.js"></script>

    <arthur name ="TourMeAway">
 <style>
  .carousel-inner > .item > img,
  .carousel-inner > .item > a > img {
      width: 100%;
      margin: auto;
  }
  </style>
    <!-- GA starts -->
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-64600856-1', 'auto');
      ga('send', 'pageview');
    </script>
    <!-- GA ends -->
</head>
<body>
 <!-- Navigation -->
 
  <header>
    <div class="main-header">
      <div class="main-nav-logo"><a href="/"><img src="/home/logoOrange.png" id="logoOrange"></a></div>
      <div class="main-nav">
        <div id='button'>
          <li class="mobile_Nav_Open"><a onclick="open_nav()"><i class="fas fa-bars"></i></a></li>
          <li class="mobile_Nav_X"><a onclick="X()"><i class="fas fa-times"></i></a></li>
        </div>
        <div class='menu_Close'>
          <li><a href="/">Home</a></li>
          <li><a href="/tours">Tours</a></li>
          <li><a href="/aboutus">About</a></li>
          <li><a href="/blog">Blog</a></li>
          <li><a href="/partner">Partners</a></li>
          <li><a href="https://www.facebook.com/pg/tourmeaway/photos/?tab=albums" target="_blank">Photos</a></li>
          <li><a href="/faq">FAQ</a></li>
        </div>
      </div>
    </div>
  </header>
  <script>
    //Navigation Bar
    function open_nav() {
        document.querySelector('.menu_Close').className='menu_Open fade-in';
        document.querySelector('header').className='header-extended fade-in';
        document.querySelector(".mobile_Nav_Open").className='mobile_Nav_Close';
        document.querySelector(".mobile_Nav_X").className='mobile_Nav_X_Open';
      } 
    function X() {
        document.querySelector('.menu_Open').className='menu_Close';
        document.querySelector('header').className='';
        document.querySelector(".mobile_Nav_Close").className='mobile_Nav_Open';
        document.querySelector(".mobile_Nav_X_Open").className='mobile_Nav_X';
    }
  </script>
 <!--Introduction-->
    <div>
      <img src="/home/tours/tourtop.jpg" style="width:100%;"></div>
    <div class="container">
    <div class="col-md-12 title">
         <img src="/home/tours/3.png" style="height: 50px;"> <h1>Longshan Temple Tour</h1>
         <p><i class="fas fa-fire"></i> 17343 booked <i class="fas fa-bolt"></i>  Instant Confirmation</p>

    </div>
    <div>        <p style="font-size:25px;">
      Need a little extra luck in your life? Visit Taipei's Longshan Temple, which houses over 100 folk gods that preside over everything from the sea to war. This colorful temple adorned with ornate dragons was originally constructed in 1738. Ask for favors from deities like Wenchang Dijun, the god of literature (who is reputed to help you study) and the Old Man Under the Moon (who pairs lovers together), and your guide will teach you how to throw the "moon stones" and help you interpret messages from these heavenly beings. Have your fortune read and learn about this bustling temple and the Buddhist/Taoist religious traditions that have made Longshan a divine destination for centuries.
    <br>
      So join us for an extraordinary night out in this city!<br>
    <br>
    <!-- <span style="font-style:italic; color:#F37342;">
    Partner: Taiwan Youth Hostel Association<br>
    Sponsor: Department of Information and Tourism,Taipei City Government</span> -->
    </p></div>
    
    <div id="myModal" class="reveal-modal">
       <img style="width:100%;" data-u="image" src="/home/route/3.jpg" />
      <a class="close-reveal-modal">×</a>
    </div>
     <div class="slide nopadding col-md-6">
      <!-- Swiper -->
      <div class="swiper-container photo">
          <div class="swiper-wrapper">
              <div class="swiper-slide swiper-lazy-preloader-white" data-swiper-autoplay="1500">
                <div class="slidecap">
                 <img data-u="image" src="/home/tours/temple1.jpg" />
                </div>
              </div>
              <div class="swiper-slide swiper-lazy-preloader-white" data-swiper-autoplay="1500">
                <div class="slidecap">
                 <img data-u="image" src="/home/tours/temple2.jpg" />
                </div>
              </div>
              <div class="swiper-slide swiper-lazy-preloader-white" data-swiper-autoplay="1500">
                <div class="slidecap">
                  <img data-u="image" src="/home/tours/temple3.jpg" />
                </div>
              </div>
              <div class="swiper-slide swiper-lazy-preloader-white" data-swiper-autoplay="1500">
                <div class="slidecap">
                  <img data-u="image" src="/home/tours/temple4.jpg" />
                </div>
              </div>
              <div class="swiper-slide swiper-lazy-preloader-white" data-swiper-autoplay="1500">
                <div class="slidecap">
                  <img data-u="image" src="/home/tours/temple5.jpg" />
                </div>
              </div>
              <div class="swiper-slide swiper-lazy-preloader-white" data-swiper-autoplay="1500">
                <div class="slidecap">
                  <img data-u="image" src="/home/tours/temple6.jpg" />
                </div>
              </div>
              <!-- <div class="swiper-slide swiper-lazy-preloader-white" data-swiper-autoplay="1500">
                <div class="slidecap" style="height:100%;">
                  <iframe class="air" width="100%" src="https://www.youtube.com/embed/fDM3oj83zMY?start=17" frameborder="0" allowfullscreen ></iframe>
                </div>
              </div> -->
          </div>
          <!-- Add Pagination -->
          <div class="swiper-pagination swiper-pagination-white"></div>
          <!-- Add Arrows -->
          <div class="swiper-button-next swiper-button-white"></div>
          <div class="swiper-button-prev swiper-button-white"></div>
      </div>
    </div>
             
     <div id="intro" class="col-md-6 nopadding">
          <!-- <h2 style="margin-top:0px;color:#F37342;">Contact us to get a quote!</h2> -->
          <!-- <h2 style="margin-top:0px;color:#F37342;">The tour on Aug 9th is canceled due to the Typhoon!</h2> -->
          <h2 style="margin-top:0px;color:#F37342;">FREE Of Charge! Donation Only!</h2>

        <div class="text-center" style="display:block">
          <div id="schedule">
            <div class="days">
              <div class="centerorleft">
                <p class="day">TUE</p>
                <p class="day">FRI</p>
                <p class="time">7:30 PM</p>
              </div>
            </div>
          </div>
          </div>
          <h2>
            <i class="far fa-clock smallicon"></i> 2 - 2.5 hours<br></h2>
          <h2>
            <i style="line-height: 40px;" class="fas fa-map-marker-alt smallicon"></i> Longshan Temple MRT Station Exit No.1 <a id="link" href="https://goo.gl/maps/2aQvYArm2nx" target="_blank"> Google Map</a><br></h2>
          <h2 >
            
            <i class="fas fa-map smallicon"></i> <a style="color:#F37342;" href="#" class="big-link" data-reveal-id="myModal" data-animation="fade">Click To Unfold The Route</a>
          </h2>
          
          <div class="twobutton">
            <div class="booknow">
              <h2 id="button1">Book Now &gt;</h2>
            </div>
            <div class="moretour">
              <h2 id="moretour">More Tour ...</h2>
            </div>
          </div>
        </div>
         <div class="slide col-md-12" id="reviews">
        <h1>Reviews</h1>
      <!-- Swiper -->
      <div class="swiper-container review">
          <div class="swiper-wrapper">
              <div style="vertical-align: middle;" class="swiper-slide swiper-lazy-preloader-white" data-swiper-autoplay="1500">
                <div class="slidecap">
                  <h2>"... For the first time - I wasn't walking around in a temple totally unsure of what's going on around me. The guides explained the entire process of praying to all the different Gods very well." - 2018 Nov </h2>
                  <h2 class="stars">jorhaa, Breda <br class="brshow"><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i></h2>
                </div>
              </div>
              <div style="vertical-align: middle;" class="swiper-slide swiper-lazy-preloader-white" data-swiper-autoplay="1500">
                <div class="slidecap">
                  <h2>"We learned so much about temples and how people pray in them, allowing us a much better appreciation of the culture around us. " - 2019 Jan</h2>
                  <h2 class="stars">ed-TO, Canada <br class="brshow"><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i></h2>
                </div>
              </div>
              <div style="vertical-align: middle;" class="swiper-slide swiper-lazy-preloader-white" data-swiper-autoplay="1500">
                <div class="slidecap">
                  <h2>"Hank our tour guide took us to several spots and bit by bit the places and stories were building up the history of old Banka, the town Taipei was founded on. He did a good job of painting the pictures of the old days and showing us how the culture today still reflects that. " -  2018 Dec.</h2>
                  <h2 class="stars">Sharon S <br class="brshow"><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i></h2>
                </div>
              </div>
              <div style="vertical-align: middle;" class="swiper-slide swiper-lazy-preloader-white" data-swiper-autoplay="1500">
                <div class="slidecap">
                  <h2>"Our guide was enthusiastic, knowledgeable, and kept us together for the night tour through Longshan Temple and Huaxi Market. She added colorful stories about the area's origins and even taught us how to make a basic offering at a temple." - 2018 Jan.</h2>
                  <h2 class="stars">celticnativehistory, US <br class="brshow"><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i></h2>
                </div>
              </div>
          </div>
          <!-- Add Pagination -->
           <div class="swiper-pagination swiper-pagination-white" id="Pagination"></div>
          <div id="arrow" style="right:0px;" class="swiper-button-next swiper-button-white"></div>
          <div id="arrow" style="left:0px;" class="swiper-button-prev swiper-button-white"></div>
      </div>
    </div>
      </div>
    </div>
    </div>
<div ng-app="tourmeaway"
      ng-init="initialize()"
      ng-controller="registerCtrl"
      >
<div id="Booking" class="application"
      ng-app="tourmeaway"
      ng-controller="registerCtrl"
      >
      <div id="BookingMode">
      <h1>Book your tour now!</h1>
      <h2>To reserve a spot, <br class="br">fill out the form below</h2>
        <input
          type="text"
          ng-model="name"
          placeholder="Name"><br /></input>
        <div
          ng-show="rename">
          <h3 style="color:Red;">*The name cannot be empty.</h3>
        </div>
        <input
          type="text"
          ng-model="email"
          placeholder="E-mail"><br /></input>
          <div
          ng-show="reemail">
          <h3 style="color:Red;">*Please enter a valid email address.</h3>
        </div>
          <!-- Testing Nationlaity -->
          <div class="select-wrapper">
          <p style="z-index: -1;"><i class="fas fa-angle-down"></i></p>
          <select name="category" ng-model="nationality">
            <option value="" label="Select Your Country" class='selectplaceholder' selected="selected" disabled selected>Select Your Country</option>
            <optgroup id="country-optgroup-Africa" label="Africa">
            <option value="Algeria" label="Algeria">Algeria</option>
            <option value="Angola" label="Angola">Angola</option>
            <option value="Benin" label="Benin">Benin</option>
            <option value="Botswana" label="Botswana">Botswana</option>
            <option value="Burkina Faso" label="Burkina Faso">Burkina Faso</option>
            <option value="Burundi" label="Burundi">Burundi</option>
            <option value="Cameroon" label="Cameroon">Cameroon</option>
            <option value="Cape Verde" label="Cape Verde">Cape Verde</option>
            <option value="Central African Republic" label="Central African Republic">Central African Republic</option>
            <option value="Chad" label="Chad">Chad</option>
            <option value="Comoros" label="Comoros">Comoros</option>
            <option value="Congo - Brazzaville" label="Congo - Brazzaville">Congo - Brazzaville</option>
            <option value="Congo - Kinshasa" label="Congo - Kinshasa">Congo - Kinshasa</option>
            <option value="Côte d’Ivoire" label="Côte d’Ivoire">Côte d’Ivoire</option>
            <option value="Djibouti" label="Djibouti">Djibouti</option>
            <option value="Egypt" label="Egypt">Egypt</option>
            <option value="Equatorial Guinea" label="Equatorial Guinea">Equatorial Guinea</option>
            <option value="Eritrea" label="Eritrea">Eritrea</option>
            <option value="Ethiopia" label="Ethiopia">Ethiopia</option>
            <option value="Gabon" label="Gabon">Gabon</option>
            <option value="Gambia" label="Gambia">Gambia</option>
            <option value="Ghana" label="Ghana">Ghana</option>
            <option value="Guinea" label="Guinea">Guinea</option>
            <option value="Guinea-Bissau" label="Guinea-Bissau">Guinea-Bissau</option>
            <option value="Kenya" label="Kenya">Kenya</option>
            <option value="Lesotho" label="Lesotho">Lesotho</option>
            <option value="Liberia" label="Liberia">Liberia</option>
            <option value="Libya" label="Libya">Libya</option>
            <option value="Madagascar" label="Madagascar">Madagascar</option>
            <option value="Malawi" label="Malawi">Malawi</option>
            <option value="Mali" label="Mali">Mali</option>
            <option value="Mauritania" label="Mauritania">Mauritania</option>
            <option value="Mauritius" label="Mauritius">Mauritius</option>
            <option value="Mayotte" label="Mayotte">Mayotte</option>
            <option value="Morocco" label="Morocco">Morocco</option>
            <option value="Mozambique" label="Mozambique">Mozambique</option>
            <option value="Namibia" label="Namibia">Namibia</option>
            <option value="Niger" label="Niger">Niger</option>
            <option value="Nigeria" label="Nigeria">Nigeria</option>
            <option value="Rwanda" label="Rwanda">Rwanda</option>
            <option value="Réunion" label="Réunion">Réunion</option>
            <option value="Saint Helena" label="Saint Helena">Saint Helena</option>
            <option value="Senegal" label="Senegal">Senegal</option>
            <option value="Seychelles" label="Seychelles">Seychelles</option>
            <option value="Sierra Leone" label="Sierra Leone">Sierra Leone</option>
            <option value="Somalia" label="Somalia">Somalia</option>
            <option value="South Africa" label="South Africa">South Africa</option>
            <option value="Sudan" label="Sudan">Sudan</option>
            <option value="Swaziland" label="Swaziland">Swaziland</option>
            <option value="São Tomé and Príncipe" label="São Tomé and Príncipe">São Tomé and Príncipe</option>
            <option value="Tanzania" label="Tanzania">Tanzania</option>
            <option value="Togo" label="Togo">Togo</option>
            <option value="Tunisia" label="Tunisia">Tunisia</option>
            <option value="Uganda" label="Uganda">Uganda</option>
            <option value="Western Sahara" label="Western Sahara">Western Sahara</option>
            <option value="Zambia" label="Zambia">Zambia</option>
            <option value="Zimbabwe" label="Zimbabwe">Zimbabwe</option>
            </optgroup>
            <optgroup id="country-optgroup-Americas" label="Americas">
            <option value="Anguilla" label="Anguilla">Anguilla</option>
            <option value="Antigua and Barbuda" label="Antigua and Barbuda">Antigua and Barbuda</option>
            <option value="Argentina" label="Argentina">Argentina</option>
            <option value="Aruba" label="Aruba">Aruba</option>
            <option value="Bahamas" label="Bahamas">Bahamas</option>
            <option value="Barbados" label="Barbados">Barbados</option>
            <option value="Belize" label="Belize">Belize</option>
            <option value="Bermuda" label="Bermuda">Bermuda</option>
            <option value="Bolivia" label="Bolivia">Bolivia</option>
            <option value="Brazil" label="Brazil">Brazil</option>
            <option value="British Virgin Islands" label="British Virgin Islands">British Virgin Islands</option>
            <option value="Canada" label="Canada">Canada</option>
            <option value="Cayman Islands" label="Cayman Islands">Cayman Islands</option>
            <option value="Chile" label="Chile">Chile</option>
            <option value="Colombia" label="Colombia">Colombia</option>
            <option value="Costa Rica" label="Costa Rica">Costa Rica</option>
            <option value="Cuba" label="Cuba">Cuba</option>
            <option value="Dominica" label="Dominica">Dominica</option>
            <option value="Dominican Republic" label="Dominican Republic">Dominican Republic</option>
            <option value="Ecuador" label="Ecuador">Ecuador</option>
            <option value="El Salvador" label="El Salvador">El Salvador</option>
            <option value="Falkland Islands" label="Falkland Islands">Falkland Islands</option>
            <option value="French Guiana" label="French Guiana">French Guiana</option>
            <option value="Greenland" label="Greenland">Greenland</option>
            <option value="Grenada" label="Grenada">Grenada</option>
            <option value="Guadeloupe" label="Guadeloupe">Guadeloupe</option>
            <option value="Guatemala" label="Guatemala">Guatemala</option>
            <option value="Guyana" label="Guyana">Guyana</option>
            <option value="Haiti" label="Haiti">Haiti</option>
            <option value="Honduras" label="Honduras">Honduras</option>
            <option value="Jamaica" label="Jamaica">Jamaica</option>
            <option value="Martinique" label="Martinique">Martinique</option>
            <option value="Mexico" label="Mexico">Mexico</option>
            <option value="Montserrat" label="Montserrat">Montserrat</option>
            <option value="Netherlands Antilles" label="Netherlands Antilles">Netherlands Antilles</option>
            <option value="Nicaragua" label="Nicaragua">Nicaragua</option>
            <option value="Panama" label="Panama">Panama</option>
            <option value="Paraguay" label="Paraguay">Paraguay</option>
            <option value="Peru" label="Peru">Peru</option>
            <option value="Puerto Rico" label="Puerto Rico">Puerto Rico</option>
            <option value="Saint Barthélemy" label="Saint Barthélemy">Saint Barthélemy</option>
            <option value="Saint Kitts and Nevis" label="Saint Kitts and Nevis">Saint Kitts and Nevis</option>
            <option value="Saint Lucia" label="Saint Lucia">Saint Lucia</option>
            <option value="Saint Martin" label="Saint Martin">Saint Martin</option>
            <option value="Saint Pierre and Miquelon" label="Saint Pierre and Miquelon">Saint Pierre and Miquelon</option>
            <option value="Saint Vincent and the Grenadines" label="Saint Vincent and the Grenadines">Saint Vincent and the Grenadines</option>
            <option value="Suriname" label="Suriname">Suriname</option>
            <option value="Trinidad and Tobago" label="Trinidad and Tobago">Trinidad and Tobago</option>
            <option value="Turks and Caicos Islands" label="Turks and Caicos Islands">Turks and Caicos Islands</option>
            <option value="U.S. Virgin Islands" label="U.S. Virgin Islands">U.S. Virgin Islands</option>
            <option value="United States" label="United States">United States</option>
            <option value="Uruguay" label="Uruguay">Uruguay</option>
            <option value="Venezuela" label="Venezuela">Venezuela</option>
            </optgroup>
            <optgroup id="country-optgroup-Asia" label="Asia">
            <option value="Afghanistan" label="Afghanistan">Afghanistan</option>
            <option value="Armenia" label="Armenia">Armenia</option>
            <option value="Azerbaijan" label="Azerbaijan">Azerbaijan</option>
            <option value="Bahrain" label="Bahrain">Bahrain</option>
            <option value="Bangladesh" label="Bangladesh">Bangladesh</option>
            <option value="Bhutan" label="Bhutan">Bhutan</option>
            <option value="Brunei" label="Brunei">Brunei</option>
            <option value="Cambodia" label="Cambodia">Cambodia</option>
            <option value="China" label="China">China</option>
            <option value="Cyprus" label="Cyprus">Cyprus</option>
            <option value="Georgia" label="Georgia">Georgia</option>
            <option value="Hong Kong" label="Hong Kong">Hong Kong</option>
            <option value="India" label="India">India</option>
            <option value="Indonesia" label="Indonesia">Indonesia</option>
            <option value="Iran" label="Iran">Iran</option>
            <option value="Iraq" label="Iraq">Iraq</option>
            <option value="Israel" label="Israel">Israel</option>
            <option value="Japan" label="Japan">Japan</option>
            <option value="Jordan" label="Jordan">Jordan</option>
            <option value="Kazakhstan" label="Kazakhstan">Kazakhstan</option>
            <option value="Kuwait" label="Kuwait">Kuwait</option>
            <option value="Kyrgyzstan" label="Kyrgyzstan">Kyrgyzstan</option>
            <option value="Laos" label="Laos">Laos</option>
            <option value="Lebanon" label="Lebanon">Lebanon</option>
            <option value="Macau SAR China" label="Macau SAR China">Macau SAR China</option>
            <option value="Malaysia" label="Malaysia">Malaysia</option>
            <option value="Maldives" label="Maldives">Maldives</option>
            <option value="Mongolia" label="Mongolia">Mongolia</option>
            <option value="Myanmar [Burma]" label="Myanmar [Burma]">Myanmar [Burma]</option>
            <option value="Nepal" label="Nepal">Nepal</option>
            <option value="Neutral Zone" label="Neutral Zone">Neutral Zone</option>
            <option value="North Korea" label="North Korea">North Korea</option>
            <option value="Oman" label="Oman">Oman</option>
            <option value="Pakistan" label="Pakistan">Pakistan</option>
            <option value="Palestinian Territories" label="Palestinian Territories">Palestinian Territories</option>
            <option value="People's Democratic Republic of Yemen" label="People's Democratic Republic of Yemen">People's Democratic Republic of Yemen</option>
            <option value="Philippines" label="Philippines">Philippines</option>
            <option value="Qatar" label="Qatar">Qatar</option>
            <option value="Saudi Arabia" label="Saudi Arabia">Saudi Arabia</option>
            <option value="Singapore" label="Singapore">Singapore</option>
            <option value="South Korea" label="South Korea">South Korea</option>
            <option value="Sri Lanka" label="Sri Lanka">Sri Lanka</option>
            <option value="Syria" label="Syria">Syria</option>
            <option value="Taiwan" label="Taiwan">Taiwan</option>
            <option value="Tajikistan" label="Tajikistan">Tajikistan</option>
            <option value="Thailand" label="Thailand">Thailand</option>
            <option value="Timor-Leste" label="Timor-Leste">Timor-Leste</option>
            <option value="Turkey" label="Turkey">Turkey</option>
            <option value="Turkmenistan" label="Turkmenistan">Turkmenistan</option>
            <option value="United Arab Emirates" label="United Arab Emirates">United Arab Emirates</option>
            <option value="Uzbekistan" label="Uzbekistan">Uzbekistan</option>
            <option value="Vietnam" label="Vietnam">Vietnam</option>
            <option value="Yemen" label="Yemen">Yemen</option>
            </optgroup>
            <optgroup id="country-optgroup-Europe" label="Europe">
            <option value="Albania" label="Albania">Albania</option>
            <option value="Andorra" label="Andorra">Andorra</option>
            <option value="Austria" label="Austria">Austria</option>
            <option value="Belarus" label="Belarus">Belarus</option>
            <option value="Belgium" label="Belgium">Belgium</option>
            <option value="Bosnia and Herzegovina" label="Bosnia and Herzegovina">Bosnia and Herzegovina</option>
            <option value="Bulgaria" label="Bulgaria">Bulgaria</option>
            <option value="Croatia" label="Croatia">Croatia</option>
            <option value="Cyprus" label="Cyprus">Cyprus</option>
            <option value="Czech Republic" label="Czech Republic">Czech Republic</option>
            <option value="Denmark" label="Denmark">Denmark</option>
            <option value="Estonia" label="Estonia">Estonia</option>
            <option value="Faroe Islands" label="Faroe Islands">Faroe Islands</option>
            <option value="Finland" label="Finland">Finland</option>
            <option value="France" label="France">France</option>
            <option value="Germany" label="Germany">Germany</option>
            <option value="Gibraltar" label="Gibraltar">Gibraltar</option>
            <option value="Greece" label="Greece">Greece</option>
            <option value="Guernsey" label="Guernsey">Guernsey</option>
            <option value="Hungary" label="Hungary">Hungary</option>
            <option value="Iceland" label="Iceland">Iceland</option>
            <option value="Ireland" label="Ireland">Ireland</option>
            <option value="Isle of Man" label="Isle of Man">Isle of Man</option>
            <option value="Italy" label="Italy">Italy</option>
            <option value="Jersey" label="Jersey">Jersey</option>
            <option value="Latvia" label="Latvia">Latvia</option>
            <option value="Liechtenstein" label="Liechtenstein">Liechtenstein</option>
            <option value="Lithuania" label="Lithuania">Lithuania</option>
            <option value="Luxembourg" label="Luxembourg">Luxembourg</option>
            <option value="Macedonia" label="Macedonia">Macedonia</option>
            <option value="Malta" label="Malta">Malta</option>
            <option value="Moldova" label="Moldova">Moldova</option>
            <option value="Monaco" label="Monaco">Monaco</option>
            <option value="Montenegro" label="Montenegro">Montenegro</option>
            <option value="Netherlands" label="Netherlands">Netherlands</option>
            <option value="Norway" label="Norway">Norway</option>
            <option value="Poland" label="Poland">Poland</option>
            <option value="Portugal" label="Portugal">Portugal</option>
            <option value="Romania" label="Romania">Romania</option>
            <option value="Russia" label="Russia">Russia</option>
            <option value="San Marino" label="San Marino">San Marino</option>
            <option value="Serbia" label="Serbia">Serbia</option>
            <option value="Serbia and Montenegro" label="Serbia and Montenegro">Serbia and Montenegro</option>
            <option value="Slovakia" label="Slovakia">Slovakia</option>
            <option value="Slovenia" label="Slovenia">Slovenia</option>
            <option value="Spain" label="Spain">Spain</option>
            <option value="Svalbard and Jan Mayen" label="Svalbard and Jan Mayen">Svalbard and Jan Mayen</option>
            <option value="Sweden" label="Sweden">Sweden</option>
            <option value="Switzerland" label="Switzerland">Switzerland</option>
            <option value="Ukraine" label="Ukraine">Ukraine</option>
            <option value="Union of Soviet Socialist Republics" label="Union of Soviet Socialist Republics">Union of Soviet Socialist Republics</option>
            <option value="United Kingdom" label="United Kingdom">United Kingdom</option>
            <option value="Vatican City" label="Vatican City">Vatican City</option>
            <option value="Åland Islands" label="Åland Islands">Åland Islands</option>
            </optgroup>
            <optgroup id="country-optgroup-Oceania" label="Oceania">
            <option value="American Samoa" label="American Samoa">American Samoa</option>
            <option value="Antarctica" label="Antarctica">Antarctica</option>
            <option value="Australia" label="Australia">Australia</option>
            <option value="Bouvet Island" label="Bouvet Island">Bouvet Island</option>
            <option value="British Indian Ocean Territory" label="British Indian Ocean Territory">British Indian Ocean Territory</option>
            <option value="Christmas Island" label="Christmas Island">Christmas Island</option>
            <option value="Cocos [Keeling] Islands" label="Cocos [Keeling] Islands">Cocos [Keeling] Islands</option>
            <option value="Cook Islands" label="Cook Islands">Cook Islands</option>
            <option value="Fiji" label="Fiji">Fiji</option>
            <option value="French Polynesia" label="French Polynesia">French Polynesia</option>
            <option value="French Southern Territories" label="French Southern Territories">French Southern Territories</option>
            <option value="Guam" label="Guam">Guam</option>
            <option value="Heard Island and McDonald Islands" label="Heard Island and McDonald Islands">Heard Island and McDonald Islands</option>
            <option value="Kiribati" label="Kiribati">Kiribati</option>
            <option value="Marshall Islands" label="Marshall Islands">Marshall Islands</option>
            <option value="Micronesia" label="Micronesia">Micronesia</option>
            <option value="Nauru" label="Nauru">Nauru</option>
            <option value="New Caledonia" label="New Caledonia">New Caledonia</option>
            <option value="New Zealand" label="New Zealand">New Zealand</option>
            <option value="Niue" label="Niue">Niue</option>
            <option value="Norfolk Island" label="Norfolk Island">Norfolk Island</option>
            <option value="Northern Mariana Islands" label="Northern Mariana Islands">Northern Mariana Islands</option>
            <option value="Palau" label="Palau">Palau</option>
            <option value="Papua New Guinea" label="Papua New Guinea">Papua New Guinea</option>
            <option value="Pitcairn Islands" label="Pitcairn Islands">Pitcairn Islands</option>
            <option value="Samoa" label="Samoa">Samoa</option>
            <option value="Solomon Islands" label="Solomon Islands">Solomon Islands</option>
            <option value="South Georgia and the South Sandwich Islands" label="South Georgia and the South Sandwich Islands">South Georgia and the South Sandwich Islands</option>
            <option value="Tokelau" label="Tokelau">Tokelau</option>
            <option value="Tonga" label="Tonga">Tonga</option>
            <option value="Tuvalu" label="Tuvalu">Tuvalu</option>
            <option value="U.S. Minor Outlying Islands" label="U.S. Minor Outlying Islands">U.S. Minor Outlying Islands</option>
            <option value="Vanuatu" label="Vanuatu">Vanuatu</option>
            <option value="Wallis and Futuna" label="Wallis and Futuna">Wallis and Futuna</option>
            </optgroup>
          </select>
       </div><br>
       <!-- End -->        
        <div ng-show="renationality">
          <h3 style="color:Red;">*The nationality cannot be empty.</h3>
        </div>
        <h2 style="font-size:20px;">Itinerary:</h2>

        <div class="select-wrapper" style="margin-left: 10px;">
        <p style="z-index: -1;"><i class="fas fa-angle-down"></i></p>
        <select name="category" ng-model="tours[0].category" class="demo-category" style="-webkit-appearance: none;" ng-change="pass(tours[0].category)">
          <option value="" class='selectplaceholder' disabled selected>Select A Tour</option>
          <optgroup label="Walking Tour">
          <!-- <option class="optionTour" value="Taipei Chill Out Tour">Taipei Chill Out Tour</option> -->
          <option class="optionTour" value="Old Town Taipei Tour">Old Town Taipei Tour</option>
          <option class="optionTour" value="Temple Tour">Longshan Temple Tour</option>
          </optgroup>
          <optgroup label="Nightlife">
          <!-- <option class="optionTour" value="Hunger Game">Hunger Game</option> -->
          <option class="optionTour" value="Pub Crawl">Pub Crawl</option>
          </optgroup>
         <!--  <optgroup label="TOUR PASS">
          <option class="optionTour" value="Party Pass">Party Pass: 2 X Pub Crawl</option>
          <option class="optionTour" value="Nightlife Pass">Nightlife Pass: Pub Crawl + Hunger Game</option>
          </optgroup> -->
        </select>
       </div>
       <h3 style="color:Red;" ng-show="!tourscheck[0].category">*The tour cannot be empty.</h3>
      <!-- <h3 style="color:#1cbf6e;" ng-show="tours[0].category=='Pub Crawl' || tours[0].category=='Hunger Game' && cid=='promo' " >Eligible To Promotion</h3> -->
      <br>
      
        <div style="z-index: 3;" class="select-wrapper" ng-show="tours[0].category!='Nightlife Pass'&&tours[0].category!='Party Pass'&&!tours[0].category==''">
          <p style="z-index: -1;"><i class="fas fa-angle-down"></i></p>
          <input
          style="color:gray; background-color:transparent;margin:0 auto;"
          placeholder="Select a date" 
            ng-model="tours[0].visitDate"
            name="visitDate"
            class="datepicker datepicker1">
          </input>
        </div>
        <div>
          <h3 style="color:Red;" ng-show="!tourscheck[0].visitDate&&!tours[0].category==''">*The date cannot be empty.</h3>
        </div>
        <input
          ng-show="!tours[0].category==''"
          onkeypress='return event.charCode >= 48 && event.charCode <= 57'
          type="number"
          min="1"
          class="private"
          ng-model="tours[0].size"
          ng-change="calculate_price()"
          placeholder="Size of the gruop"></input>
          <div>
          <h3 style="color:Red;" ng-show="!tourscheck[0].size&&!tours[0].category==''">*The size of the group cannot be empty.</h3>
          </div>
        <div
          ng-show="tours[0].size>9" >
          <h3 style="max-width:400px;color:gray; margin:0 auto;"  >For the group of 10 or more, we kindly ask you to book a private tour to get your own private guide.<br>Visit <a href="/tours/privatetour">Private Tour</a> for more details.</h3>
        </div>

 <!--        <input
          ng-show="tours[0].category=='Pub Crawl'"
          onkeypress='return event.charCode >= 48 && event.charCode <= 57'
          type="number"
          min="0"
          class="private"
          ng-model="tours[0].shotglass"
          ng-change="calculate_price()"
          placeholder="How many Souvenir Shot Glasses do you want?"></input> -->
        
        <!-- Pass Test -->
        <h2 ng-show="tours[0].category=='Nightlife Pass'||tours[0].category=='Party Pass'">Select a Pub Crawl date</h2>
        <div style="z-index: 3;" class="select-wrapper" ng-show="tours[0].category=='Nightlife Pass'||tours[0].category=='Party Pass'">
          <p style="z-index: -1;"><i class="fas fa-angle-down"></i></p>
          <input
          ng-change="partydate(tours[0].category)"
          style="z-index: 4;color:gray; background-color:transparent;margin:0 auto;"
          placeholder="Select a Pub Crawl date" 
            ng-model="combo[0].visitDate1"
            name="visitDate"
            class="datepicker datepickerA">
          </input>
        </div>
        <br>
         <h2 ng-show="tours[0].category=='Nightlife Pass'&&combo[0].visitDate1!=''">Select a Hunger Game date</h2>
         <h2 ng-show="tours[0].category=='Party Pass'&&combo[0].visitDate1!=''">Select another Pub Crawl date</h2>
        <div style="z-index: 3;" class="select-wrapper" ng-show="(tours[0].category=='Nightlife Pass'||tours[0].category=='Party Pass')&&combo[0].visitDate1!=''">
          <input
          style="z-index: 4;color:gray; background-color:transparent;margin:0 auto;"
          placeholder="Select another date" 
            ng-model="combo[0].visitDate2"
            name="visitDate"
            class="datepicker datepickerB">
          </input>

        </div>
        <div>
          <h3 style="color:Red;" ng-show="!tourscheck[0].visitDate&&!tours[0].category==''">*The date cannot be empty.</h3>
        </div>
        <!-- Pass Test End -->
       <div>
        <div
          id="container"
          ng-repeat="tour in tours"
          ng-show="$index !== 0">
          <h2 style="font-size:20px;" ng-show="$index!=1&&$index!=2&&$index!=3&&$index!=4">{{$index+1}}th Tour:</h2>
          <h2 style="font-size:20px;" ng-show="$index==1">Second Tour:</h2>
          <h2 style="font-size:20px;" ng-show="$index==2">Third Tour:</h2>
          <h2 style="font-size:20px;" ng-show="$index==3">Fourth Tour:</h2>
          <h2 style="font-size:20px;" ng-show="$index==4">Fifth Tour:</h2>
          
          <div class="select-wrapper" ng-model="tour.category" style="margin-left: 10px;">
            <p style="z-index: -1;"><i class="fas fa-angle-down"></i></p>
            <select name="category" ng-model="tour.category" class="demo-category{{$index + 1}}" style="-webkit-appearance: none;">
              <option value="" class='selectplaceholder' disabled selected>Select A Tour
              </option>
              <optgroup label="Walking Tour">
              <!-- <option class="optionTour" value="Taipei Chill Out Tour">Taipei Chill Out Tour</option> -->
              <option class="optionTour" value="Old Town Taipei Tour">Old Town Taipei Tour</option>
              <option class="optionTour" value="Temple Tour">Longshan Temple Tour</option>
              </optgroup>
              <optgroup label="Nightlife">
              <!-- <option class="optionTour" value="Hunger Game">Hunger Game</option> -->
              <option class="optionTour" value="Pub Crawl">Pub Crawl</option>
              <!-- <option class="optionTour" value="Craft Beer Cruise">8PM, Craft Beer Cruise</option> -->
              </optgroup>
            </select>
           </div>
           <br ng-show="!tours[($index)].category==''">
            <h3 style="color:Red;" ng-show="!tourscheck[($index)].category">*The tour cannot be empty.</h3>

            <div style="z-index: 3;" class="select-wrapper" ng-show="!tours[($index)].category==''">
          <p style="z-index: -1;"><i class="fas fa-angle-down"></i></p>
          <input
          style="color:gray; background-color:transparent;margin:0 auto;"
          placeholder="Select a date" 
            ng-show="!tours[($index)].category==''"
            class="datepicker {{'datepicker' + ($index + 1).toString()}}">
          </input>
          
        </div>
        <br ng-show="!tours[($index)].category==''">
            <h3 style="color:Red;" ng-show="!tourscheck[($index)].visitDate&&!tours[($index)].category==''">*The date cannot be empty.</h3>
           
           <input
              ng-show="!tours[($index)].category==''"
              onkeypress='return event.charCode >= 48 && event.charCode <= 57'
              type="number"
              min="1";
              class="private"
              ng-model="tour.size"
              ng-change="calculate_price()"
              placeholder="Size of the gruop"
              style="margin-left:0px;margin-right:0px;"><br>
              <div
              >
              <h3 style="color:Red;" ng-show="!tourscheck[$index].size&&!tours[($index)].category==''">*The size of the group cannot be empty.</h3>
            </div>
             <!-- <input
          ng-show="tours[($index)].category=='Pub Crawl'"
          onkeypress='return event.charCode >= 48 && event.charCode <= 57'
          type="number"
          min="0";
          class="private"
          ng-model="tours[($index)].shotglass"
          placeholder="How many Souvenir Shot Glasses do you want?"></input>
 -->
           <!--  <div
              ng-show="tour.size>9">
              <h3 style="color:white; margin-left:10px;margin-right:10px;" >For the group of 10 or more, you may consider booking a private tour to get your own private guide.<br>Visit <a href="/tours/privatetour">Private Tour</a> for more details.</h3>
            </div> -->      
        </div>
      </div>
      <div class="checkbox select-wrapper" style="background-color: transparent;display: block;margin: 0 auto;margin-top: 10px;"ng-show="tours[0].category!='Nightlife Pass'&&tours[0].category!='Party Pass'&&!tours[0].category==''">
          <!-- <h2 style='width: 59%;font-size:16px;' ng-show="comboshow"><span style="color:#c42314;">Book Pub Crawl and Hunger Game together to get another $100 off!</span> <i class="fas fa-arrow-down"></i></h2> -->
          <button ng-click="add_tour()" style="float: left;margin:0px;border: none;border-radius: 5px;width: 59%;background-color: #c42314;">
          Add Another Tour</button>
          <button ng-click="cancel_tour()" style="margin:0px;width: 39%;float: right;border-radius: 5px;border: none;background-color: #848486;">
          Undo</button>
        </div>

         <div class="select-wrapper" ng-show='!havecid' style="margin-top: 10px;margin-left: 10px;">
          <p style="z-index: -1;"><i class="fas fa-angle-down"></i></p>
          <select
            ng-model="source">
            <option value=""  disabled selected>How do you know TourMeAway?</option>
            <option value="Trip Advisor">TripAdvisor</option>
            <option value="Couchsurfing">Couch Surfing</option>
            <option value="Hostel Recommendation">Hostel / Hotel Recommendation</option>
            <option value="Civitatis">Civitatis</option>            
            <option value="Internet Search">Internet Search</option>
            <option value="Friend's Recommendation">Friend's Recommendation</option>
            <option value="Instagram">Instagram</option>
            <option value="Instagram">Facebook</option>
            <option value="MeetUp">MeetUp</option>
            <option value="Flyers">Flyers</option>
            <option value="Other">Other</option>
          </select>
          </div>
        <br>
        <div
          class="select-wrapper-auto autocomplete"
          ng-show="(source == 'Hostel Recommendation') && !havecid">
          <input 
            id="myInput"
            style="margin:0 auto;"
            style="margin-left: 0px; font-family: Josefin Sans;font-size: 18px;"
            placeholder= "Hostel / Hotel Name"
            type="text"
            ng-model="hostelname"
            ng-change="other=''"
            ></input>
        </div>
        <br  ng-show="(source == 'Hostel Recommendation') && !havecid">
        <div
          ng-show="source == 'Other'"
          class="select-wrapper-auto autocomplete">
          <input
            id="inputother"
            style="margin:0 auto;"
            placeholder= "Please write it down"
            type="text"
            ng-model="other" ng-change='hostelname=""'></input>
        </div>
        <br ng-show="source == 'Other'">
        <div
          ng-show="resource">
          <h3 style="color:Red;">*These field cannot be empty.</h3>
        </div>

        <div class="select-wrapper send" style="border: none;background-color: transparent;">
        <button ng-show="!loading&&!(tours[0].category=='Nightlife Pass'||tours[0].category=='Party Pass')" ng-click="register()" id="reserve">
          <span ng-show="!loading">Reserve a spot</span></button>
       
        <button ng-show="!loading&&(tours[0].category=='Nightlife Pass'||tours[0].category=='Party Pass')" ng-click="registercombo()" id="reserve">
          <span ng-show="!loading">Reserve a spot</span></button>
        </div>
        <div
          ng-show="require">
          <h3 style="color:Red;">*These fields cannot be empty.</h3>
        </div>
        
        <img ng-show="loading" src="/home/loadingBar.gif" style="height:150px"><br />
        <div class="select-wrapper send" style="border: none;background-color: transparent;margin-bottom: 100px;">
        <hr style="border-top: 1px solid #f37342;">
        <button ng-show="!loading" id='privatetour' >
          <span ng-show="!loading">Go to <span>Private Tour</span> Request</span></button>
        </div>
      </div>
      
<div id="addon" style=" display:none;"> 
  <div class='col-md-12' style="width:100%;max-width:600px;">
    <div class='col-md-12' style="width:100%">
          <h1 style="color:#F37342; width:100%;" id='confirmationname'>Optional: LITMITED SOUVENIRS</h1>
          <br>
    </div>
    <h2 style="font-size:20px;" >Tired of fridge magnet?<br>Get the one of the kind Souvenir Shot Glasses for TWD$ 150 And TourMeAway Bag for TWD$ 250 at our Pub Crawl & Hunger Game!</h2>
    <div class="slide nopadding col-md-10 col-md-offset-1">
      <!-- Swiper -->
      <div class="swiper-container photo">
          <div class="swiper-wrapper">
              <div class="swiper-slide swiper-lazy-preloader-white" data-swiper-autoplay="1500">
                <div class="slidecap">
                  <img data-u="image" src="/home/tours/shot1.jpg" />
                </div>
              </div>
              <div class="swiper-slide swiper-lazy-preloader-white" data-swiper-autoplay="1500">
                <div class="slidecap">
                  <img data-u="image" src="/home/tours/shot2.jpg" />
                </div>
              </div>
              <div class="swiper-slide swiper-lazy-preloader-white" data-swiper-autoplay="1500">
                <div class="slidecap">
                  <img data-u="image" src="/home/tours/bag1.jpg" />
                </div>
              </div>
              <div class="swiper-slide swiper-lazy-preloader-white" data-swiper-autoplay="1500">
                <div class="slidecap">
                  <img data-u="image" src="/home/tours/bag2.jpg" />
                </div>
              </div>
              <div class="swiper-slide swiper-lazy-preloader-white" data-swiper-autoplay="1500">
                <div class="slidecap">
                  <img data-u="image" src="/home/tours/bag3.jpg" />
                </div>
              </div>
          </div>
          <!-- Add Pagination -->
          <div class="swiper-pagination swiper-pagination-white"></div>
          <!-- Add Arrows -->
          <div class="swiper-button-next swiper-button-white"></div>
          <div class="swiper-button-prev swiper-button-white"></div>
      </div>
    </div>
    <input
          onkeypress='return event.charCode >= 48 && event.charCode <= 57'
          type="number"
          min="0";
          class="private"
          ng-model="tours[0].shotglass"
          placeholder="How many Souvenir Shot Glasses do you want?"></input>
    <br>
    <input
          onkeypress='return event.charCode >= 48 && event.charCode <= 57'
          type="number"
          min="0";
          class="private"
          ng-model="tours[0].tmabag"
          placeholder="How many Souvenir Bag do you want?"></input>
    <div ng-show="!loading" class="col-md-12" id="weaccept" style="background-color: transparent;display: block;padding-left:0px;padding-right:0px;">
          <button ng-click="backtobooking()" class="editbutton">
          Edit <i class="fas fa-pencil-alt"></i></button>
          <button ng-click="toconfirmation()" class="paybutton">
          Proceed <i class="fas fa-check"></i></button>
    </div>
    </div>
</div>  
 <br>
    <br>
    <br>


<!-- <div id="Confirmation" style=" display:none;">  -->
<div id="Confirmation" style=" display:inline-block;"> 
      <div class='col-md-12' style="width:100%;max-width:600px;">
        <div class='col-md-12' style="width:100%">
          <h1 style="color:#F37342; width:100%;" id='confirmationname'>Confirmation</h1>
        </div>
        <table class="tourtable col-md-12 tabletop" style="font-size:20px;width:100%">
          <tr style="text-align:left;">
            <th>Name:</th>
            <td>{{name}}</td>
          </tr>
          <tr>
            <th>Email:</th>
            <td style='word-break: break-all;'>{{email}}</td>
          </tr>
          <tr ng-show="tours[0].category=='Party Pass'||tours[0].category=='Nightlife Pass'">
            <th>TOUR PASS:</th>
            <td ng-show="tours[0].category=='Party Pass'" style='word-break: break-all;'>PARTY PASS - TWO PUB CRAWL</td>
            <td ng-show="tours[0].category=='Nightlife Pass'" style='word-break: break-all;'>NIGHTLIFE PASS - PUB CRAWL + HUNGER GAME</td>
          </tr>
        </table>
        <table ng-repeat="tour in confirmtours" class="tablebottom tourtable col-md-12 " style="font-size:20px;width:100%;">
            <tr><th colspan="2">
              <h2 class="tabletourorder" style="color:white;float: left;margin-left:0px;" ng-show="$index!=0&&$index!=1&&$index!=2&&$index!=3&&$index!=4">{{$index+1}}th Tour:</h2>
              <h2 class="tabletourorder" style="color:white;float: left;margin-left:0px;"ng-show="$index==0">First Tour:</h2>
              <h2 class="tabletourorder" style="color:white;float: left;margin-left:0px;"ng-show="$index==1">Second Tour:</h2>
              <h2 class="tabletourorder" style="color:white;float: left;margin-left:0px;"ng-show="$index==2">Third Tour:</h2>
              <h2 class="tabletourorder" style="color:white;float: left;margin-left:0px;"ng-show="$index==3">Fourth Tour:</h2>
              <h2 class="tabletourorder" style="color:white;float: left;margin-left:0px;"ng-show="$index==4">Fifth Tour:</h2></th>
            </tr>
            <tr>
              <th>Visit Date:</th>
              <td>{{tour.FormatDate}}</td>
            </tr>
            <tr>
              <th>Tour:</th>
              <td>{{tour.category}}</td>
            </tr>
            <tr>
              <th>Price:</th>
              <td ng-show="tours[0].category=='Party Pass'">2 Pub Crawl for 1300</td>
              <td ng-show="tours[0].category=='Nightlife Pass'">Pub Crawl + Hunger Game for 1200</td>
              <td ng-show="tours[0].category!='Nightlife Pass'&&tours[0].category!='Party Pass'"><span style="text-decoration: line-through;">TWD$ {{tour.originalprice}}</span><span style="color:red"> TWD$ {{tour.price}}</span></td>
            </tr>
            <tr>
              <th>Size:</th>
              <td>{{tour.size}}</td>
            </tr>
        </table>
        <table class="tablebottom tourtable col-md-12 " style="font-size:20px;width:100%;" ng-show="tours[0].shotglass>0||tours[0].tmabag>0">
            <tr><th colspan="2">
              <h2 class="tabletourorder" style="color:white;float: left;margin-left:0px;">Souvenir</h2></th>
            </tr>
            <tr ng-show="tours[0].shotglass>0">
              <th>Shot Glasses:</th>
              <td>X {{tours[0].shotglass}}, per <span style="text-decoration: line-through;">TWD$ 200 </span><span style="color:red"> TWD$ 150</span></td>
            </tr>
            <!-- <tr ng-show="tours[0].tmabag>0">
              <th>TMA Bags:</th>
              <td>X {{tours[0].tmabag}}, per <span style="text-decoration: line-through;">TWD$ 300 </span><span style="color:red"> TWD$ 250</span></td>
            </tr> -->
        </table>
        <table class="tourtable col-md-12" style="font-size:20px;">
            <tr>
              <th style="font-size:24px;">TOTAL:</th>
              <td style="font-size:24px;"><span style="text-decoration: line-through;">TWD$ {{originalprice}} </span><span style="color:red"> TWD$ {{totalprice}}</span></td>
            </tr>
        </table>
        
        <h2 class='col-md-12' style="background-color:rgb(253, 214, 199); color:black; text-align:left; font-size:18px; padding:15px;border-radius:5px;"><span ng-show="!(tours[0].category=='Party Pass'||tours[0].category=='Nightlife Pass')">Early Bird Discount: TWD$ -100 * {{paidtournumber}}<br> <!-- <span ng-show="combo>0"><br>Combo Discount: TWD$ -100 * {{combo}}</span> --></span><span ng-show="tours[0].shotglass>0">Souvenir Shot Glasses Preorder DisTWD$ -50 * {{tours[0].shotglass}}<br></span><span ng-show="tours[0].tmabag>0">TMA Bag Preorder Discount: TWD$ -50 * {{tours[0].tmabag}}<br></span>
        Cancellations made within 24 hours of departure are non-refundable.<br>Cancellations made more than 24 hours before departure will receive a full refund.</h2>
        <!-- r<h3 class='col-md-12' style="color:#F37342; font-size:18px; text-align:left;padding-left:0px;">Cancellations made within 24 hours of departure are non-refundable.<br>Cancellations made more than 24 hours before departure will receive a full refund.<br><br></h3> -->

        <div ng-show="!loading" class="col-md-12" id="weaccept" style="background-color: transparent;display: block;padding-left:0px;padding-right:0px;">
          <button ng-click="edit()" class="editbutton">
          Edit <i class="fas fa-pencil-alt"></i></button>
          <button ng-click="registerpaidtour()" class="paybutton">
          Proceed to Payment <i class="fas fa-check"></i></button>
        </div>
        <div>
           <img ng-show="loading" src="/home/loadingBar.gif" style="height:150px"><br />
        </div>
        
        <!-- <button ng-show="!loading" ng-click="edit()" style="margin:0px;"> -->
          <!-- <span ng-show="!loading">Edit</span></button><br> -->
        
        <div class='col-md-12' style=" text-align:left;padding:0px;border: 1px solid #F37342; border-radius:5px;margin-top:30px;margin-bottom:30px;"><h3 style="color:#F37342;font-size:20px;display:inline-block;vertical-align: middle;padding-left:10px;">We Accept:</h3><img src="/home/Bank.png" style='height:50px;'></img>
        <!-- <button ng-show="!loading" ng-click="registerpaidtour()" style="width:100%;">
          <span ng-show="!loading" style="font-size:20px">Proceed to Payment</span></button> -->
        
        </div>
      </div>
      </div>  
   </div>   
</div>    
<!-- footer starts -->
  <div class="footer" >
    <div class="footer-TA">
      <a href="http://www.tripadvisor.com/Attraction_Review-g293913-d7313964-Re
        views-TourMeAway_Free_Walking_Tour_In_Taipei-Taipei.html" target="_blank">
        <img src="/home/tripad.png" alt="tripadvisor">
      </a>
    </div>
    <div class="footer-text">
      <h2 class="footer-text-title">TourMeAway</h2>
      <h3>
        <a href="https://www.facebook.com/tourmeaway/" target="_blank">
          <i class="fab fa-facebook-square"></i>
        </a>
        <a href="https://www.instagram.com/tourmeaway/" target="_blank">
          <i class="fab fa-instagram"></i>
        </a>
        <a href="https://twitter.com/tourmeaway" target="_blank">
          <i class="fab fa-twitter-square"></i>
        </a>
        <a href="mailto:service@tourmeaway.com" target="_blank">
          <i class="fas fa-envelope-square"></i>
        </a>
      </h3>
      <h2>service@tourmeaway.com</h2>
      <p>Copyright © TourMeAway INC. All rights reserved.</p>
    </div>
  </div>
  <!-- footer ends -->   
 <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.4.5/angular.min.js"></script>
  <script src="/js/slider/js/swiper.min.js"></script>
  <script>
    var swiper = new Swiper('.photo', {
        autoHeight:true,
        pagination: '.swiper-pagination',
        nextButton: '.swiper-button-next',
        prevButton: '.swiper-button-prev',
        paginationClickable: true,
        spaceBetween: 0,
        centeredSlides: true,
        autoplay: {
          delay:5000,
        disableOnInteraction: false,
        },
        loop: true,
        waitForTransition: true,
        speed: 1000
    });
    var swiper = new Swiper('.review', {
        autoHeight:true,
        pagination: '.swiper-pagination',
        nextButton: '.swiper-button-next',
        prevButton: '.swiper-button-prev',
        paginationClickable: true,
        spaceBetween: 0,
        centeredSlides: true,
        autoplay: {
          delay:5000,
        disableOnInteraction: false,
        },
        loop: true,
        waitForTransition: true,
        speed: 2000
    });
  </script>
  <script>
  var t = angular.module('tourmeaway', []);
  t.controller('registerCtrl', function($scope, $rootScope, $http) {
    
    $scope.registercombo = function() {

      //CHECKING ALL THE BLANKS ARE FILLED, ALERT WILL BE SHOWN IF NOT.
      if( !(/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test($scope.email)) )$scope.reemail = true; else $scope.reemail=false; 
      if($scope.name=='') $scope.rename = true; else $scope.rename=false;
      if($scope.nationality=='') $scope.renationality = true;else $scope.renationality=false;
      if($scope.source!='')
        { 
          $scope.resource = false;
          if($scope.source=='Hostel Recommendation'){if($scope.hostelname=='')$scope.resource=true;};
          if($scope.source=='Other'){if($scope.other=='')$scope.resource=true;};
        }else $scope.resource=true;
      if($scope.number=='') $scope.renumber= true; else $scope.renumber=false;
      if($scope.combo[0].visitDate1=='') $scope.revisitdate1 = true;else $scope.revisitdate1=false;
      if($scope.combo[0].visitDate2=='') $scope.revisitdate2 = true;else $scope.revisitdate2=false;
      
      //FUNCTION STOPS IF THE BLANKS ARE NOT FILLED
      if($scope.reemail||$scope.rename||$scope.renationality||$scope.resource||$scope.number||$scope.revisitdate1||$scope.revisitdate2) return;

      var visitDate1 = new Date($scope.combo[0].visitDate1);
      var visitDate2 = new Date($scope.combo[0].visitDate2);
      var date = visitDate1.getDate();
      var month = visitDate1.getMonth() + 1;
      var year = visitDate1.getYear() + 1900;
      var odate = date;
      if(date < 10) date = '0' + date;
      if(month < 10) month = '0' + month;
      $scope.combo[0].visitDate1 = month + '/' + date + '/' + year;

      var monthname = ["January","February","March","April","May","June","July","August","September","October","November","December"];
      $scope.combo[0].FormatDate1 = odate + ' ' + monthname[visitDate1.getMonth()] +  ', ' + year;

      date = visitDate2.getDate();
      month = visitDate2.getMonth() + 1;
      year = visitDate2.getYear() + 1900;
      odate = date;
      if(date < 10) date = '0' + date;
      if(month < 10) month = '0' + month; 
      $scope.combo[0].visitDate2 = month + '/' + date + '/' + year;

      var monthname = ["January","February","March","April","May","June","July","August","September","October","November","December"];
      $scope.combo[0].FormatDate2 = odate + ' ' + monthname[visitDate2.getMonth()] +  ', ' + year;       
      if($scope.confirmtours.length==1)
        $scope.confirmtours.push({
        visitDate: '',
        category: '',
        price: '',
        originalprice:'',
        FormatDate:'',
        shotglass:'',
        tmabag:''
      });
      
        $scope.confirmtours[0].visitDate = $scope.combo[0].visitDate1;
        $scope.confirmtours[0].category = "Pub Crawl";
        $scope.confirmtours[0].size = $scope.tours[0].size;
        $scope.confirmtours[0].FormatDate = $scope.combo[0].FormatDate1;
        $scope.confirmtours[0].shotglass = $scope.tours[0].shotglass;
        $scope.confirmtours[0].tmabag = $scope.tours[0].tmabag;

        $scope.confirmtours[1].visitDate = $scope.combo[0].visitDate2;

        $scope.confirmtours[1].size = $scope.tours[0].size;
        $scope.confirmtours[1].FormatDate = $scope.combo[0].FormatDate2;

        
         $("#addon").fadeIn();
         document.getElementById("addon").style.display= "inline-block";
         document.getElementById("BookingMode").style.display = "none";
         $('html, body').animate({
              scrollTop: $("#addon").offset().top-120
          }, 800);
    }
    // End of combo

    $scope.partypassclick = function() {
       $('html, body').animate({
            scrollTop: $("#BookingMode").offset().top-120
        }, 800);
       $scope.tours[0].category="Party Pass";
       console.log($scope.tours[0].category);
    }

    $scope.backtobooking = function() {
      $("#BookingMode").fadeIn();
      document.getElementById("BookingMode").style.display= "inline-block";
      document.getElementById("addon").style.display = "none";
       $('html, body').animate({
            scrollTop: $("#BookingMode").offset().top-120
        }, 800);
    }

      $scope.toconfirmation = function() {
        if($scope.tours[0].shotglass=="")$scope.tours[0].shotglass=0;
        if($scope.tours[0].tmabag=="")$scope.tours[0].tmabag=0;
        if($scope.tours[0].category=="Party Pass") {
          $scope.confirmtours[1].category = "Pub Crawl";
          $scope.originalprice = $scope.confirmtours[0].size*1600+Number($scope.tours[0].shotglass)*200+Number($scope.tours[0].tmabag)*300;
          $scope.totalprice=$scope.confirmtours[0].size*1300+$scope.tours[0].shotglass*150+$scope.tours[0].tmabag*250;
        }
        else if($scope.tours[0].category=="Nightlife Pass") {
          $scope.confirmtours[1].category = "Hunger Game";
          $scope.originalprice = $scope.confirmtours[0].size*1500+$scope.tours[0].shotglass*200+$scope.tours[0].tmabag*300;
          $scope.totalprice=$scope.confirmtours[0].size*1200+$scope.tours[0].shotglass*150+$scope.tours[0].tmabag*250;}
          else {
          $scope.originalprice = 0;
         $scope.today.getMonth();
         $scope.today.getDate();
         $scope.totalprice=$scope.hungergame*600+$scope.pubcrawl*700+$scope.tours[0].shotglass*150+$scope.tours[0].tmabag*250;
         // console.log($scope.totalprice);
         $scope.originalprice=$scope.hungergame*700+$scope.pubcrawl*800+$scope.tours[0].shotglass*200+$scope.tours[0].tmabag*300;
         $scope.paidtournumber=$scope.hungergame+$scope.pubcrawl;
          };
        for (var i = $scope.confirmtours.length - 1; i >= 0; i--) {
           var dddd = new Date($scope.confirmtours[i].visitDate);
           switch($scope.confirmtours[i].category+dddd.getDay()){
            case 'Pub Crawl5':
            $scope.confirmtours[i].category = 'FRI. 7:30PM, Pub Crawl';
            $scope.confirmtours[i].originalprice=800;
            $scope.confirmtours[i].price = 700;
            break;
            case 'Pub Crawl3':
            $scope.confirmtours[i].category = 'WED. 8:30PM, Pub Crawl';
            $scope.confirmtours[i].originalprice=800;
            $scope.confirmtours[i].price = 700;
            break;
             case 'Pub Crawl6':
            $scope.confirmtours[i].category = 'SAT. 8:30PM, Pub Crawl';
            $scope.confirmtours[i].originalprice=800;
            $scope.confirmtours[i].price = 700;
            break;

            case 'Hunger Game0':
            $scope.confirmtours[i].category = 'SUN. 8PM, Hunger Game';
            $scope.confirmtours[i].originalprice=700;
            $scope.confirmtours[i].price = 600;
            break;
            case 'Hunger Game4':
            $scope.confirmtours[i].category = 'THU. 8PM, Hunger Game';
            $scope.confirmtours[i].originalprice=700;
            $scope.confirmtours[i].price = 600;
            break;
           }
         };
         $("#Confirmation").fadeIn();
         document.getElementById("Confirmation").style.display= "inline-block";
         document.getElementById("addon").style.display = "none";
         $('html, body').animate({
              scrollTop: $("#Confirmation").offset().top-120
          }, 800);
      }

      $scope.register = function() {

      $scope.hostelname =document.getElementById('myInput').value;
      if($scope.source!=''){
        if($scope.source=='Hostel Recommendation'){if($scope.hostelname=='')$scope.sourcecheck=false;else $scope.sourcecheck=true;}
        else if($scope.source=='Other'){
          if($scope.other==''){$scope.sourcecheck=false;}else{ $scope.sourcecheck=true;}}else $scope.sourcecheck =true;
        }else $scope.sourcecheck=false;

      $scope.TC=false;
      for(var tour_i = 0; tour_i < $scope.tours.length; tour_i++) {
      var visitDate = new Date($('.datepicker' + (tour_i + 1).toString()).val());
      var date = visitDate.getDate();
      var month = visitDate.getMonth() + 1;
      var year = visitDate.getYear() + 1900;
      var odate = date;
      if(date < 10) date = '0' + date;
      if(month < 10) month = '0' + month;
      $scope.tours[tour_i].visitDate = month + '/' + date + '/' + year;

      var monthname = ["January","February","March","April","May","June","July","August","September","October","November","December"];
      $scope.tours[tour_i].FormatDate = odate + ' ' + monthname[visitDate.getMonth()] +  ', ' + year;        
      };    
      for (var i = $scope.tours.length - 1; i >= 0; i--) {
        if(($scope.tours[i].size == 0)||($scope.tours[i].size =='')||($scope.tours[i].size ==null)) {$scope.tourscheck[i].size = false} else $scope.tourscheck[i].size = true;
        if($scope.tours[i].category =='') {$scope.tourscheck[i].category = false} else $scope.tourscheck[i].category = true;
        if($scope.tours[i].visitDate ==''||$scope.tours[i].visitDate =='NaN/NaN/NaN') {$scope.tourscheck[i].visitDate = false} else $scope.tourscheck[i].visitDate = true;
        $scope.TC=$scope.tourscheck[i].visitDate&&$scope.tourscheck[i].category&&$scope.tourscheck[i].size;
      };
      $scope.pubcrawl=0;
      $scope.hungergame=0;
      $scope.shotglassnumber=0;
      $scope.craftbeercruise=0;
      $scope.totalprice =0;
      
      if( !(/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test($scope.email)) )$scope.reemail = true; else $scope.reemail=false;
      if($scope.reemail==true || $scope.name=='' || $scope.nationality=='' || $scope.number==''|| !$scope.sourcecheck ||!$scope.TC){
        $scope.require = true;
        if($scope.name=='') $scope.rename = true; else $scope.rename=false;
        if($scope.nationality=='') $scope.renationality = true;else $scope.renationality=false;
        if($scope.source!='')
          {$scope.resource = false;
            if($scope.source=='Hostel Recommendation'){if($scope.hostelname=='')$scope.resource=true;};
             if($scope.source=='Other'){if($scope.other=='')$scope.resource=true;};
          }
        else {$scope.resource=false;}
        }
        else{
        $scope.reemail = false;
        $scope.rename = false;
        $scope.renationality = false;
        $scope.renumber = false;
        $scope.resource = false;
        $scope.revd = false;
        $scope.rec = false;
        $scope.require = false;
        $scope.confirmtours= [];
        for (var i = 0; i <= $scope.tours.length - 1; i++) {
        $scope.confirmtours.push({
          visitDate: '',
          category: '',
          price: '',
          originalprice: '',
          FormatDate:'',
          shotglass:'',
          tmabag:''
        });
        $scope.confirmtours[i].visitDate = $scope.tours[i].visitDate;
        $scope.confirmtours[i].category = $scope.tours[i].category;
        $scope.confirmtours[i].size = $scope.tours[i].size;
        $scope.confirmtours[i].FormatDate = $scope.tours[i].FormatDate;
       //$scope.confirmtours[i].shotglass = $scope.tours[i].shotglass;
       };
        $scope.paidtourtrue=false;

         for (var i = $scope.confirmtours.length - 1; i >= 0; i--) {
           var dddd = new Date($scope.confirmtours[i].visitDate);
           switch($scope.confirmtours[i].category+dddd.getDay()){
            
            case 'Pub Crawl5':
            $scope.confirmtours[i].category = 'FRI. 7:30PM, Pub Crawl';
            $scope.pubcrawl += $scope.confirmtours[i].size;
            $scope.paidtourtrue=true;
            $scope.confirmtours[i].price = 700;
            $scope.confirmtours[i].originalprice = 800;
            break;
            case 'Pub Crawl3':
            $scope.confirmtours[i].category = 'WED. 8:30PM, Pub Crawl';
            $scope.pubcrawl += $scope.confirmtours[i].size;
            $scope.paidtourtrue=true;
            $scope.confirmtours[i].price = 700;
            $scope.confirmtours[i].originalprice = 800;
            break;
             case 'Pub Crawl6':
            $scope.confirmtours[i].category = 'SAT. 8:30PM, Pub Crawl';
            $scope.pubcrawl += $scope.confirmtours[i].size;
            $scope.paidtourtrue=true;
            $scope.confirmtours[i].price = 700;
            $scope.confirmtours[i].originalprice = 800;
            break;

            case 'Hunger Game0':
            $scope.confirmtours[i].category = 'SUN. 8PM, Hunger Game';
            $scope.hungergame += $scope.confirmtours[i].size;
            $scope.paidtourtrue=true;
            $scope.confirmtours[i].price = 600;
            $scope.confirmtours[i].originalprice = 700;
            break;
            case 'Hunger Game4':
            $scope.confirmtours[i].category = 'THU. 8PM, Hunger Game';
            $scope.hungergame += $scope.confirmtours[i].size;
            $scope.paidtourtrue=true;
            $scope.confirmtours[i].price = 600;
            $scope.confirmtours[i].originalprice = 700;
            break;
            case 'Taipei Chill Out Tour0':
            $scope.confirmtours[i].category = 'SUN. 2PM, Taipei Chill Out Tour';
            $scope.confirmtours[i].originalprice = 0;
            $scope.confirmtours[i].price = 0;
            break;

            case 'Old Town Taipei Tour1':
            $scope.confirmtours[i].category = 'MON. 2PM, Old Town Taipei Tour';
            $scope.confirmtours[i].price = 0;
            $scope.confirmtours[i].originalprice = 0;
            break;

            case 'Temple Tour2':
            $scope.confirmtours[i].category = 'TUE. 7:30PM, Longshan Temple Tour';
            $scope.confirmtours[i].price = 0;
            $scope.confirmtours[i].originalprice = 0;
            break;

            case 'Old Town Taipei Tour3':
            $scope.confirmtours[i].category = 'WED. 2PM, Old Town Taipei Tour';
            $scope.confirmtours[i].price = 0;
            $scope.confirmtours[i].originalprice = 0;
            break;

            case 'Taipei Chill Out Tour4':
            $scope.confirmtours[i].category = 'THU. 2PM, Taipei Chill Out Tour';
            $scope.confirmtours[i].price = 0;
            $scope.confirmtours[i].originalprice = 0;
            break;

            case 'Temple Tour5':
            $scope.confirmtours[i].category = 'FRI. 7:30PM, Longshan Temple Tour';
            $scope.confirmtours[i].price = 0;
            $scope.confirmtours[i].originalprice = 0;
            break;

            case 'Old Town Taipei Tour6':
            $scope.confirmtours[i].category = 'SAT. 2PM, Old Town Taipei Tour';
            $scope.confirmtours[i].price = 0;
            $scope.confirmtours[i].originalprice = 0;
            break;
           }
         };
        
         // if($scope.hungergame>0 && $scope.pubcrawl>0){
         //  if($scope.hungergame >= $scope.pubcrawl)$scope.combo = $scope.pubcrawl;
         //  if($scope.hungergame < $scope.pubcrawl)$scope.combo = $scope.hungergame;
         //  $scope.totalprice=$scope.totalprice-$scope.combo*100;
         // };

        if($scope.paidtourtrue){
          $("#addon").fadeIn();
          document.getElementById("addon").style.display= "inline-block";
          document.getElementById("BookingMode").style.display = "none";
          $('html, body').animate({
              scrollTop: $("#addon").offset().top-120
          }, 800);
        }else{
            return $scope.registerpaidtour();
         }

         var swiper = new Swiper('.photo', {
        autoHeight:true,
        pagination: '.swiper-pagination',
        nextButton: '.swiper-button-next',
        prevButton: '.swiper-button-prev',
        paginationClickable: true,
        spaceBetween: 0,
        centeredSlides: true,
        autoplay: {
          delay:5000,
        disableOnInteraction: false,
        },
        loop: true,
        waitForTransition: true,
        speed: 1000
    });
         
    }
    }

        function autocomplete(inp, arr) {
          /*the autocomplete function takes two arguments,
          the text field element and an array of possible autocompleted values:*/
          var currentFocus;
          /*execute a function when someone writes in the text field:*/
          inp.addEventListener("input", function(e) {
              var a, b, i, val = this.value;
              /*close any already open lists of autocompleted values*/
              closeAllLists();
              if (!val) { return false;}
              currentFocus = -1;
              /*create a DIV element that will contain the items (values):*/
              a = document.createElement("DIV");
              a.setAttribute("id", this.id + "autocomplete-list");
              a.setAttribute("class", "autocomplete-items");
              /*append the DIV element as a child of the autocomplete container:*/
              this.parentNode.appendChild(a);
              /*for each item in the array...*/
              for (i = 0; i < arr.length; i++) {
                /*check if the item starts with the same letters as the text field value:*/
                if (arr[i].substr(0, val.length).toUpperCase() == val.toUpperCase()) {
                  /*create a DIV element for each matching element:*/
                  b = document.createElement("DIV");
                  /*make the matching letters bold:*/
                  b.innerHTML = "<strong>" + arr[i].substr(0, val.length) + "</strong>";
                  b.innerHTML += arr[i].substr(val.length);
                  /*insert a input field that will hold the current array item's value:*/
                  b.innerHTML += "<input type='hidden' value='" + arr[i] + "'>";
                  /*execute a function when someone clicks on the item value (DIV element):*/
                      b.addEventListener("click", function(e) {
                      /*insert the value for the autocomplete text field:*/
                      inp.value = this.getElementsByTagName("input")[0].value;
                      if(inp.id =='myInput') {$scope.hostelname = this.getElementsByTagName("input")[0].value; $scope.finalhostelname = this.getElementsByTagName("input")[0].value;};
                      if(inp.id =='inputother') {$scope.other = this.getElementsByTagName("input")[0].value; $scope.finalother = this.getElementsByTagName("input")[0].value;}
                      //console.log(inp.id);
                      /*close the list of autocompleted values,
                      (or any other open lists of autocompleted values:*/
                      closeAllLists();
                  });
                  a.appendChild(b);
                }
              }
          });
          /*execute a function presses a key on the keyboard:*/
          inp.addEventListener("keydown", function(e) {
              var x = document.getElementById(this.id + "autocomplete-list");
              if (x) x = x.getElementsByTagName("div");
              if (e.keyCode == 40) {
                /*If the arrow DOWN key is pressed,
                increase the currentFocus variable:*/
                currentFocus++;
                /*and and make the current item more visible:*/
                addActive(x);
              } else if (e.keyCode == 38) { //up
                /*If the arrow UP key is pressed,
                decrease the currentFocus variable:*/
                currentFocus--;
                /*and and make the current item more visible:*/
                addActive(x);
              } else if (e.keyCode == 13) {
                /*If the ENTER key is pressed, prevent the form from being submitted,*/
                e.preventDefault();
                if (currentFocus > -1) {
                  /*and simulate a click on the "active" item:*/
                  if (x) x[currentFocus].click();
                }
              }
          });
          function addActive(x) {
            /*a function to classify an item as "active":*/
            if (!x) return false;
            /*start by removing the "active" class on all items:*/
            removeActive(x);
            if (currentFocus >= x.length) currentFocus = 0;
            if (currentFocus < 0) currentFocus = (x.length - 1);
            /*add class "autocomplete-active":*/
            x[currentFocus].classList.add("autocomplete-active");
          }
          function removeActive(x) {
            /*a function to remove the "active" class from all autocomplete items:*/
            for (var i = 0; i < x.length; i++) {
              x[i].classList.remove("autocomplete-active");
            }
          }
          function closeAllLists(elmnt) {
            /*close all autocomplete lists in the document,
            except the one passed as an argument:*/
            var x = document.getElementsByClassName("autocomplete-items");
            for (var i = 0; i < x.length; i++) {
              if (elmnt != x[i] && elmnt != inp) {
              x[i].parentNode.removeChild(x[i]);
            }
          }
        }
        /*execute a function when someone clicks in the document:*/
        document.addEventListener("click", function (e) {
            closeAllLists(e.target);
        });
        }


    $scope.registerpaidtourundo = function() {
      $scope.confirmationmode=false;
    }

    $scope.registerpaidtour = function() {
      $scope.loading = true;
      for(var tour_i = 0; tour_i < $scope.tours.length; tour_i++) {

        var visitDate = new Date($('.datepicker' + (tour_i + 1).toString()).val());

        var date = visitDate.getDate();
        var month = visitDate.getMonth() + 1;
        var year = visitDate.getYear() + 1900;

        if(date < 10) date = '0' + date;
        if(month < 10) month = '0' + month;
        $scope.tours[tour_i].visitDate = month + '/' + date + '/' + year;        
      }

      if($scope.email=='' || $scope.name=='' || $scope.nationality=='' || $scope.number==''|| $scope.source==''|| $scope.tours[0].visitDate=='' || $scope.tours[0].category=='' ){

        $scope.require = true;
        if($scope.email=='') $scope.reemail = true; else $scope.reemail=false;
        if($scope.name=='') $scope.rename = true; else $scope.rename=false;
        if($scope.nationality=='') $scope.renationality = true;else $scope.renationality=false;
        if($scope.number=='') $scope.renumber = true;else $scope.renumber=false;
        if($scope.source=='') $scope.resource = true;else $scope.resource=false;
        if($scope.tours[0].visitDate=='') $scope.revd = true;else $scope.revd=false;
        if($scope.tours[0].category=='') $scope.rec = true;else $scope.rec=false;
        }else{
        $scope.reemail = false;
        $scope.rename = false;
        $scope.renationality = false;
        $scope.renumber = false;
        $scope.resource = false;
        $scope.revd = false;
        $scope.rec = false;
        $scope.require = false;
      // 7/20 change the date before send
      // start loading, change to circle.gif...etc      
      $scope.loading = true;
      var d = new Date();
      if($scope.totalprice == 0){
       $scope.MerchantTradeNo = "FreeWalkingTour"+d.getMonth() + d.getDate() + d.getHours() + d.getMinutes() +d.getMilliseconds();
      }else $scope.MerchantTradeNo = "PaidTour"+d.getMonth() + d.getDate() + d.getHours() + d.getMinutes() +d.getMilliseconds();

      if($scope.tours[0].category=="Party Pass"||$scope.tours[0].category=="Nightlife Pass") var combo = $scope.tours[0].category;
      $scope.loading = true;
      if($scope.finalhostelname != ''){$scope.hostelname = $scope.finalhostelname;}
      if($scope.finalother != ''){$scope.other = $scope.finalother;}
      $http.post('/register/create', {
        email: $scope.email,
        name: $scope.name,
        nationality: $scope.nationality,
        //number: $scope.number,
        hostelname: $scope.hostelname,
        other: $scope.other,
        source: $scope.source,
        tours: $scope.confirmtours,
        MerchantTradeNo: $scope.MerchantTradeNo,
        totalprice: $scope.totalprice,
        cid: $scope.cid,
        combo: combo,
        tmabag: $scope.tours[0].tmabag,
        shotglass: $scope.tours[0].shotglass
      })
      .success(function(response, status) {
// stopped loading
        $scope.loading = true;
        var _result = response.result;
        if($scope.totalprice!=0){            
            $http.post('/payment/paidtourpayment', {
            category: 'PAIDTOUR',
            TotalAmount: $scope.totalprice,
            MerchantTradeNo: $scope.MerchantTradeNo,
            email: $scope.email,
            name: $scope.name,
            tours: $scope.tours
            })
            .success(function(response, status) {
             // set the base URL of the vendor's domain
            const vendorBaseUrl = 'https://ccore.newebpay.com';

            // get the HTML response from the server
            const responseHtml = response.result;
            window.location.replace(vendorBaseUrl);
            window.location.href =vendorBaseUrl;
            // parse the HTML into a document object
            const parser = new DOMParser();
            const doc = parser.parseFromString(responseHtml, 'text/html');

            // set the base URL of the document to the vendor's domain
            const base = doc.createElement('base');
            base.href = vendorBaseUrl;
            doc.head.appendChild(base);

            // modify all relative URLs in the document to use the vendor's domain
            const modifyRelativeUrl = (element, attribute) => {
              const url = element.getAttribute(attribute);
              if (url && !url.startsWith('http') && !url.startsWith('//')) {
                element.setAttribute(attribute, vendorBaseUrl + url);
              }
            };

            doc.querySelectorAll('a[href], link[href], img[src], script[src]')
              .forEach(element => {
                modifyRelativeUrl(element, 'href');
                modifyRelativeUrl(element, 'src');
              });

            // redirect the current page to the modified document
            document.open();
            document.write(doc.documentElement.outerHTML);
            document.close();

            // update the current page's history
            const title = doc.title || '';
            const url = doc.URL || '';
            history.pushState(null, title, url);

            })
            .error(function(response, status) {
              $scope.loading = false;
              alert('oops, something went wrong');
            })
        };
        if($scope.totalprice==0){
          $http.post('/register/newemailconfirmation', {
            RtnCode: "N/A",
            MerchantTradeNo: $scope.MerchantTradeNo,
            })
            .success(function(response, status) {
              var _result = response.result;
              document.write(_result);
              document.location = '/checkout/complete?MerchantTradeNo='+$scope.MerchantTradeNo;
            })
            .error(function(response, status) {
              $scope.loading = false;
              alert('oops, something went wrong');
            })
          
        };
      })
      .error(function(response, status) {
// stopped loading
        $scope.loading = false;
        alert('oops, something went wrong');
      })
    }
  }

    $scope.initialize = function() {

      $scope.finalhostelname = '';
      $scope.comboshow = false;
      $scope.today= new Date();
      $scope.sourcecheck =true;
      $scope.other = '';
      $scope.hostelname = '';
      $scope.tourscheck=[{
        visitDate: true,
        category: true,
        size:true
      }];
      $scope.cbcselected = false;
      var url_string = window.location.href;
      var url = new URL(url_string);
      $scope.cidvalid =false;
      $scope.cid = url.searchParams.get("cid");
      if ($scope.cid==null && Cookies.get('cid')!='undefine')$scope.cid = Cookies.get('cid');
      if($scope.cid!=null){
        //Have CID code
        Cookies.set('cid', $scope.cid, { expires: 7 });
        //CBC NOBOOKING ENABLE
        $scope.cbcnumber = 0;
        var today = new Date();
        var dd = today.getDate();
        var mm = today.getMonth()+1;
        var yy = today.getYear()+1900;
        if(dd>=10)dd=dd; else dd = '0' + dd;
        if(dd>=10)mm=mm; else mm = '0' + mm;
        today = mm+"/"+dd+"/"+yy;
        //console.log(today);
        $http.post('/register/get_cbc_register',{date:today})
        .success(function(response, status) {
              for (var i = response.result.length - 1; i >= 0; i--) {
                 $scope.cbcnumber = $scope.cbcnumber + Number(response.result[i].number);
              };
              // console.log($scope.cbcnumber);
            });
        
        //END

        $http.get('/register/find_partner',{})
            .success(function(response, status) {
              $scope.partnersresult = response.result;
                for (var i = $scope.partnersresult.length - 1; i >= 0; i--) {
                  if($scope.partnersresult[i].cid == $scope.cid){
                    $scope.havecid =true;
                    $scope.cidvalid =true;
                    if($scope.partnersresult[i].partnertype=='Partners'){
                      if($scope.cid=="promo"){
                        $scope.other = "Promotion";
                      }
                      $scope.other = $scope.partnersresult[i].name;
                      $scope.source = 'Partners'};
                    if($scope.partnersresult[i].partnertype=='Hotels & Hostels'){
                      $scope.hostelname = $scope.partnersresult[i].name;
                      $scope.source = 'Hostel Recommendation'};
                  }
                };
                if(!$scope.cidvalid){
                  $scope.partnersresult=[];
                  $http.get('/register/find_partner',{})
                      .success(function(response, status) {
                        $scope.partnersresult = response.result;
                         var partnerlist=[];
                         var hostellist=[];
                          for (var i = $scope.partnersresult.length - 1; i >= 0; i--) {
                          if($scope.partnersresult[i].partnertype=='Partners') partnerlist.push($scope.partnersresult[i].name);
                          if($scope.partnersresult[i].partnertype=='Hotels & Hostels') hostellist.push($scope.partnersresult[i].name);
                          };
                          partnerlist = Array.from(new Set(partnerlist));
                          hostellist = Array.from(new Set(hostellist));
                          autocomplete(document.getElementById("myInput"), hostellist);
                          autocomplete(document.getElementById("inputother"), partnerlist);
                          document.getElementById("Confirmation").style.display = "none";
                      })
                      .error(function(response, status) {
                        console.log(response);
                      }) 
                }
                document.getElementById("Confirmation").style.display = "none";
            })
            .error(function(response, status) {
              console.log(response);
            }) 
      }
      else{
        $scope.havecid =false;
        $scope.partnersresult=[];
        $http.get('/register/find_partner',{})
            .success(function(response, status) {
              $scope.partnersresult = response.result;
               var partnerlist=[];
               var hostellist=[];
                for (var i = $scope.partnersresult.length - 1; i >= 0; i--) {
                if($scope.partnersresult[i].partnertype=='Partners' && $scope.partnersresult[i].name != "Promotion") partnerlist.push($scope.partnersresult[i].name);
                if($scope.partnersresult[i].partnertype=='Hotels & Hostels') hostellist.push($scope.partnersresult[i].name);
                };
                partnerlist = Array.from(new Set(partnerlist));
                hostellist = Array.from(new Set(hostellist));
                autocomplete(document.getElementById("myInput"), hostellist);
                autocomplete(document.getElementById("inputother"), partnerlist);
                document.getElementById("Confirmation").style.display = "none";
            })
            .error(function(response, status) {
              console.log(response);
            }) 
      };
      $("#button1, #button2, #button3").click(function(){
        $('html, body').animate({
        scrollTop: $("#Booking").offset().top-20

          }, 800);
      });

     
      $("#moretour").click(function(){
        document.location = '/tours'
      });

      $("#privatetour").click(function(){
        document.location = '/tours/privatetour'
      });
      $scope.visitDate = new Date();
      $scope.visitDate2 = new Date();
      $scope.visitDay = $scope.visitDate.getDay();
      $scope.visitDay2 = $scope.visitDate2.getDay();
      $scope.source = '';
      $scope.name = '';
      //$scope.number = '';
      $scope.email = '';
      $scope.nationality = '';
      $scope.loading = false;
      $scope.tourn = 1;
      $scope.combo = [{category:'', visitDate1: '',
        category1: '', visitDate2: '',
        category2: '', size: '', shotglass:'', tmabag:
        '',FormatDate1:'',FormatDate2:''
      }];
      $scope.tours = [{visitDate: '',
        category: '', size: '',FormatDate:'',shotglass:'', tmabag:''
      }];
      $scope.confirmtours= [{visitDate: '',
        category: '',size:'',originalprice:'',price:'',FormatDate:'',shotglass:'', tmabag:''
      }];
      $scope.a = true;
      $scope.b = true;
      $scope.c = true;
      $scope.d = true;
      $scope.e = true;
      $scope.f = true;
      $scope.g = true;
      $scope.i = true;
      $scope.confirmationmode = false;
      $scope.require = false;
      $scope.today= new Date();
      $scope.todaytour1='';
      $scope.todaytour2='';
      $scope.todaytourlink1='';
      $scope.todaytourlink2='';
      $scope.totalprice = 0;
      $scope.pubcrawl = 0;
      $scope.hungergame = 0;


    }
    $scope.date_picked = function() {
      $scope.visitDay = $scope.visitDate.getDay();
      $scope.visitDay2 = $scope.visitDate2.getDay();
    }
    $scope.pass = function(option) {

      if(option=="Nightlife Pass"||option=="Party Pass")
      {
      console.log("PASS");
      setTimeout(function() {
        comboselected(option)
      }, 200)
      }
      else{
      //$scope.cancel_tour();
      }

    }
    $scope.partydate = function(option) {

      if(option=="Party Pass")
      {
      console.log("PASSqw");
      setTimeout(function() {
        Party_Pass_Selected_Date(option)
      }, 200)
      }
      else{
      //$scope.cancel_tour();
      }

    }
    $scope.add_tour = function() {
      $scope.tours.push({
        visitDate: '',
        category: '',
        FormatDate:'',
        shotglass:'',
        tmabag:''
      })
      // $scope.confirmtours.push({
      //   visitDate: '',
      //   category: '',
      //   price: '',
      //   originalprice: '',
      //   FormatDate:'',
      //   shotglass:'',
      //   tmabag:''
      // })
      $scope.tourscheck.push({
        visitDate: true,
        category: true,
        size:true
      })
      setTimeout(function() {
        optionAdded($scope.tours.length)
      }, 200)

    }
    $scope.cancel_tour = function() {
      if($scope.tours.length == 1) return;
      $scope.tours.splice($scope.tours.length - 1, 1);
      // $scope.confirmtours.splice($scope.tours.length - 1, 1);
    }
    $scope.edit = function() {
      $("#addon").fadeIn();
      document.getElementById("addon").style.display = "inline-block";
      document.getElementById("Confirmation").style.display = "none";
         $('html, body').animate({
              scrollTop: $("#addon").offset().top-120
          }, 800);
    }

    $scope.checkname = function(){
      setTimeout( function(){
      $scope.$apply();
      },2000);
    }


//TRYING NEW THING
    $(function() {
    //$('.optionDay').hide();
     $('#datepicker').pickadate();
    
    $('.demo-category').change(function() {
      var Tour = $('.demo-category').val();
      switch(Tour){
        case "Taipei Chill Out Tour":
            var $input = $('.datepicker').pickadate();
            var picker = $input.pickadate('picker');
            picker.set({
              min: [2021,5,27],
              max:[2021,5,27],
              closeOnSelect: true,
              formatSubmit: 'mm/dd/yyyy',
              container: '#container',
              enable: [1,5],
              disable: [2,3,4,6,7]
            });
            picker.set('clear');
          break;

          case "Old Town Taipei Tour":
            var $input = $('.datepicker').pickadate();
            var picker = $input.pickadate('picker');
            picker.set({
              min: 'picker__day--today',
              max:[2023,3,31],
              closeOnSelect: true,
              formatSubmit: 'mm/dd/yyyy',
              container: '#container',
              enable: [4,7],
              disable: [1,2,3,5,6,[2023,0,21]] 
            });
            picker.set('clear');
          break;

          case "Temple Tour":
           var $input = $('.datepicker').pickadate();
            var picker = $input.pickadate('picker');
            picker.set({
              min: 'picker__day--today',
              max:[2023,3,31],
              closeOnSelect: true,
              formatSubmit: 'mm/dd/yyyy',
              container: '#container',
              enable: [3,6],
              disable: [[2023,0,24],1,2,4,5,7]
            });
            picker.set('clear');
          break;
          case "Hunger Game":
          $scope.comboshow = true;
          var $input = $('.datepicker').pickadate();
          var picker = $input.pickadate('picker');
            picker.set({
              min: [2021,1,12],
              max:[2021,1,12],
              closeOnSelect: true,
              formatSubmit: 'mm/dd/yyyy',
              container: '#container',
              enable: [1,5],
              disable: [[2020,0,19],[2020,0,26],2,3,4,6,7]
            });
            picker.set('clear');
          break;
          case "Pub Crawl":
          $scope.comboshow = true;
          var $input = $('.datepicker').pickadate();
          var picker = $input.pickadate('picker');
            picker.set({
              min: 'picker__day--today',
              max:[2023,3,31],
              closeOnSelect: true,
              formatSubmit: 'mm/dd/yyyy',
              container: '#container',
              enable: [7],
              disable: [1,2,3,4,5,6,[2023,0,21]] 
            });
            picker.set('clear');
          break;
      }
      // var picker = $input.pickadate('picker');
    })
  }); //end of Chaneg funciton

  var optionAdded = function(index) {

$(function() {
    //$('.optionDay').hide();
     $('#datepicker'+ index).pickadate();
    
    $('.demo-category'+ index).change(function() {

      var Tour = $('.demo-category'+ index).val();
      switch(Tour){
        case "Taipei Chill Out Tour":
            var $input = $('.datepicker'+ index).pickadate();
            var picker = $input.pickadate('picker');
            picker.set({
              min: [2021,5,27],
              max:[2021,5,27],
              closeOnSelect: true,
              formatSubmit: 'mm/dd/yyyy',
              container: '#container',
              enable: [1,5],
              disable: [2,3,4,6,7]
            });
            picker.set('clear');
          break;

          case "Old Town Taipei Tour":
            var $input = $('.datepicker'+ index).pickadate();
            var picker = $input.pickadate('picker');
            picker.set({
              min: 'picker__day--today',
              max:[2023,3,31],
              closeOnSelect: true,
              formatSubmit: 'mm/dd/yyyy',
              container: '#container',
              enable: [4,7],
              disable: [1,2,3,5,6,[2023,0,21]] 
            });
            picker.set('clear');
          break;

          case "Temple Tour":
           var $input = $('.datepicker'+ index).pickadate();
            var picker = $input.pickadate('picker');
            picker.set({
              min: 'picker__day--today',
              max:[2023,3,31],
              closeOnSelect: true,
              formatSubmit: 'mm/dd/yyyy',
              container: '#container',
              enable: [3,6],
              disable: [[2023,0,24],1,2,4,5,7]
            });
            picker.set('clear');
          break;
          case "Hunger Game":
          $scope.comboshow = true;
          var $input = $('.datepicker'+ index).pickadate();
          var picker = $input.pickadate('picker');
            picker.set({
              min: [2021,1,12],
              max:[2021,1,12],
              closeOnSelect: true,
              formatSubmit: 'mm/dd/yyyy',
              container: '#container',
              enable: [1,5],
              disable: [[2020,0,19],[2020,0,26],2,3,4,6,7]
            });
            picker.set('clear');
          break;
          case "Pub Crawl":
          $scope.comboshow = true;
          var $input = $('.datepicker'+ index).pickadate();
          var picker = $input.pickadate('picker');
            picker.set({
              min: 'picker__day--today',
              max:[2023,3,31],
              closeOnSelect: true,
              formatSubmit: 'mm/dd/yyyy',
              container: '#container',
              enable: [7],
              disable: [1,2,3,4,5,6,[2023,0,21]] 
            });
            picker.set('clear');
          break;
          case "Craft Beer Cruise":
          var $input = $('.datepicker'+ index).pickadate();
          var picker = $input.pickadate('picker');
           if(new Date().getHours()>=19){
             picker.set({
              min: 1,
              closeOnSelect: true,
              formatSubmit: 'mm/dd/yyyy',
              container: '#container',
              enable: [3,5],
              disable: [[2018,11,20],[2018,11,13],[2019,1,5],[2019,1,7],[2019,0,8],[2019,0,10],1,2,4,6,7]
            });
          }
          else{
            picker.set({
              min: [2020,12,1],
              closeOnSelect: true,
              formatSubmit: 'mm/dd/yyyy',
              container: '#container',
              enable: [3,5],
              disable: [[2018,11,20],[2018,11,13],[2019,1,5],[2019,1,7],[2019,0,8],[2019,0,10],1,2,4,6,7]
            });
          }
            picker.set('clear');
          break;
      }
    })
})

    };
    var comboselected= function(pass) {

$(function() {
    //$('.optionDay').hide();
     $('#datepickerA').pickadate();
     $('#datepickerB').pickadate();
      switch(pass){
          case "Nightlife Pass":
          $scope.comboshow = true;
          var $inputA = $('.datepickerA').pickadate();
          var $inputB = $('.datepickerB').pickadate();
          var pickerA = $inputA.pickadate('picker');
            pickerA.set({
              min: [2020,12,1],
              closeOnSelect: true,
              formatSubmit: 'mm/dd/yyyy',
              container: '#container',
              enable: [7],
              // enable: [7,4,6],
              // disable: [1,2,3,5]
              disable: [1,2,3,4,5,6]
            });

            pickerA.set('clear');

          var pickerB = $inputB.pickadate('picker');
             pickerB.set({
              min: [2020,12,1],
              closeOnSelect: true,
              formatSubmit: 'mm/dd/yyyy',
              container: '#container',
              //enable: [1,5],
              //disable: [2,3,4,6,7]
              disable: [1,2,3,4,5,6,7]
            });
            pickerB.set('clear');
          break;
          case "Party Pass":
          $scope.comboshow = true;
          var $inputA = $('.datepickerA').pickadate();
          var picker = $inputA.pickadate('picker');
            picker.set({
              min: [2020,12,1],
              closeOnSelect: true,
              formatSubmit: 'mm/dd/yyyy',
              container: '#container',
              enable: [7],
              // enable: [7,4,6],
              // disable: [1,2,3,5]
              disable: [1,2,3,4,5,6]
            });
            picker.set('clear');
          break;
      }
})

    };
     var Party_Pass_Selected_Date = function(pass) {
      var disable = new Date($scope.combo[0].visitDate1)
        if(pass=="Party Pass"){
           $('#datepickerB').pickadate();
          var $inputB = $('.datepickerB').pickadate();
          var picker = $inputB.pickadate('picker');
            picker.set({
              min: [2020,12,1],
              closeOnSelect: true,
              formatSubmit: 'mm/dd/yyyy',
              container: '#container',
              enable: [7],
              // enable: [7,4,6],
              // disable: [1,2,3,5]
              disable: [1,2,3,4,5,6]
            });
            picker.set('clear');
        }
    };
  })
  </script>
  <script src="/js/slider/js/swiper.min.js"></script>
</body>
</html>
